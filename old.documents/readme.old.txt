/**
 * 戦国IXAツール
 * 
 * @author sengokuixa-moko
 * @author server9+10.osafune
 * @version 1.8.6+02-24
 */

- 現在プレイはしていませんが、データは削除していないので
- 新合戦仕様の刷新が9+10鯖に適用されたら直すかも･･･
- なので3章は非対応です。

- 勝手にsengokuixa-mokoを改造させてもらいました。
- Google Chrome しか対応してません。
- 不具合や要望は、返事はしませんが可能な限り対応します。
- チート化への対応は、原作者と同様にお受けできませんのでご了承ください。

- 改造版機能追加一覧

■ 全ページ
・敵襲を枠内に表示
・サイドメニューのカードを非表示
・書状の一括既読
・メニューと資源バーの位置を逆転表示
・サイドメニューの所領ソート

■ チャット
・チャットウィンドウに敵襲状況表示

■ 部隊
・待機武将一覧をシンプル表示
・お気に入り部隊編成の登録とお気に入りからのデッキセット
・全部隊解散
・全部隊配置
・待機武将一覧にグループアイコン表示

■ 地図
・部隊行動状況を表示
・戦況マップを表示
・ダブルクリックで対象の合戦報告書を表示
・陣取り禁止区域表示
・カーソル選択対象を拡大表示
・右クリックでツールチップを表示
・攻撃目標をマーク表示

■ 内政
・復活するボタンを非表示
・空地戦力を表示
・訓練施設内に他訓練施設リンクを設置
・右クリックで施設操作ツールを表示
・機能選択を押しボタン表示
・建築状況一覧表示

■ 出陣
・合流攻撃検索に出陣確認情報表示
・マップツールチップに最寄陣から出撃表示

■ 秘境
・全部隊を秘境へ送る

■ 簡易編成
・あらゆる兵士を一括セット
・簡易編成カード200枚表示
・補充リンク押下で最大補充
・全部隊兵士を0に一括セット

- 更新履歴
[2011-10-01] v1.8.6+02-24
・兵士を一括セット修正
・他微修正

[2011-9-30] v1.8.6+02-23+
・兵士を一括セット修正
・他微修正

[2011-9-28] v1.8.6+02-23
・戦況マップ砦ジャンプ対応

[2011-9-27] v1.8.6+02-22+
・実行中の作業ログウィンドウ拡大

[2011-9-27] v1.8.6+02-21
・プロフィール内拠点LV表示

[2011-9-25] v1.8.6+02-20
・簡易編成で兵士を一括セット

[2011-9-22] v1.8.6+02-19+
・全部隊兵士0セット
・最寄陣修正

[2011-9-21] v1.8.6+02-18++
・マップツールチップに最寄陣から出撃表示
・簡易編成で兵種選択と同時に兵士セット
・敵襲チャットウィンドウ修正

[2011-9-15] v1.8.6+02-17
・少しずつ色々

[2011-6-5] v1.8.6+02-16+
・地図ツールチップから所領名称変更

[2011-5-31] v1.8.6+02-15++
・微調整

[2011-5-28] v1.8.6+02-15+
・出陣確認画面に必要攻撃力を表示
・合成画面ページャAjax化の補正

[2011-5-25] v1.8.6+02-14+
・合成画面のページャをAjax化
・合成画面にお気に入りソート追加
・合成画面にグループアイコン表示
・建築状況一覧表示によるデフォルト所領選択の修正

[2011-5-23] v1.8.6+02-13
・待機武将一覧にグループアイコン表示

[2011-5-22] v1.8.6+02-12
・グループソートの修正
・建築状況一覧表示によるデフォルト所領選択の修正

[2011-5-19] v1.8.6+02-11
・攻撃目標のマーク表示

[2011-5-18] v1.8.6+02-10
・建築状況一覧の表示

[2011-5-11] v1.8.6+02-09
・jQueryプラグインのロードを解除

[2011-5-10] v1.8.6+02-08++
・陥落拠点読込時の読込み漏れ改善
・全部隊編成の処理修正

[2011-5-07] v1.8.6+02-08++
・敵襲チャットウィンドウレイアウト調整
・全部隊編成の処理修正

[2011-5-05] v1.8.6+02-08+
・タイムアウト表示画像変更
・内政ツールチップへダブルアップ操作項目追加(ON/OFF可能)
・陥落拠点読込時の地図サイズ強制変更の解除
・陥落拠点読込時の読込み漏れ改善
・お気に入りソートの部隊編成２ページ目以降表示
・全編成画面にお気に入りソート表示

[2011-5-04] v1.8.6+02-08
・地図で右クリックツールチップにプロフィール、同盟情報を追加
・タイムアウト表示位置を変更
・タイムアウト表示クリックでログアウト

[2011-5-02] v1.8.6+02-07
・地図で右クリックツールチップ表示

[2011-4-30] v1.8.6+02-06
・チャットウィンドウに敵襲状況を表示

[2011-4-24] v1.8.6+02-05
・機能選択を押しボタン表示

[2011-4-14] v1.8.6+02-04
・簡易編成の補充リンク押下で最大補充

[2011-4-14] v1.8.6+02-03
・全部隊解散の中断を修正
・鉄砲騎馬を騎馬鉄砲へ統一

[2011-4-14] v1.8.6+02-02
・待機武将一覧で総攻防力計算機能追加

[2011-4-6] v1.8.6+02-01++
・統合サーバ向け微調整

[2011-4-3] v1.8.6+01-40++
・簡易編成カード200枚表示

[2011-4-3] v1.8.6+01-39
・待機武将一覧をシンプル表示
・待機武将一覧から選択された武将を一括セット

[2011-3-25] v1.8.6+01-38
・デッキお気に入りソート機能追加

[2011-3-25] v1.8.6+01-37++
・カーソル選択対象を拡大表示
・陣取り禁止区域を48砦まで対応

[2011-3-24] v1.8.6+01-36
・陣取り禁止区域表示

[2011-3-23] v1.8.6+01-35
・内政画面右クリックで施設操作ツールを表示

[2011-3-22] v1.8.6+01-34
・内政画面で座標登録

[2011-3-22] v1.8.6+01-33
・メニュープルダウン地図の砦表示数増減設定
・合戦報告書前後ページリンク修正

[2011-3-22] v1.8.6+01-32
・★７をリスト表示

[2011-3-22] v1.8.6+01-31
・合戦報告書前後ページリンク追加
・サイドメニューの所領を非表示にする

[2011-3-21] v1.8.6+01-30
・所領ソート昇順降順選択
・微調整

[2011-3-21] v1.8.6+01-29+
・サイドメニューの所領ソート(名前降順)
・不具合修正

[2011-3-20] v1.8.6+01-28+
・微調整

[2011-3-17] v1.8.6+01-28
・微調整

[2011-3-17] v1.8.6+01-27+
・全部隊配置機能追加

[2011-3-17] v1.8.6+01-26
・全部隊解散機能追加

[2011-3-16] v1.8.6+01-25+
・お気に入りから選択した部隊を一括でデッキセット

[2011-3-13] v1.8.6+01-24+
・ここへ部隊出陣ボタンを見易い位置へ変更
・メニューと資源バーの位置を逆転表示

[2011-3-10] v1.8.6+01-23
・簡易編成で兵士0武将に兵士を一括セット

[2011-3-10] v1.8.6+01-22
・簡易編成で秘境部隊に兵士を一括セット

[2011-3-9] v1.8.6+01-21
・お気に入り部隊編成に秘境部隊を追加
・全部隊を秘境へ送る機能を追加

[2011-3-6] v1.8.6+01-20
・お気に入り部隊編成の登録とお気に入りからのデッキセットを可能にする

[2011-3-1] v1.8.6+01-19
・合流攻撃検索から陣取り攻撃を可能にする

[2011-2-26] v1.8.6+01-18
・市での取引後、複合兵種で最大作成兵数表示

[2011-2-25] v1.8.6+01-17+
・訓練施設内に他訓練施設リンクを設置

[2011-2-24] v1.8.6+01-16
・合流攻撃検索から単機攻撃を可能にする
 (陣張りかぶり予防用）

[2011-2-22] v1.8.6+01-15
・合流攻撃検索に単機攻撃時の情報を表示する

[2011-2-22] v1.8.6+01-14+
・出陣状況一覧に陣張り時の攻撃を【陣張】で表示する

[2011-2-21] v1.8.6+01-13
・デッキ不具合修正
・書状全件チェック中のボタン押下不可

[2011-2-20] v1.8.6+01-12
・書状に全件既読機能を追加

[2011-2-19] v1.8.6+01-11
・ページャーAjaxの不具合を修正

[2011-2-19] v1.8.6+01-10
・マップの敵又は味方をダブルクリックで対象の合戦報告書を表示する機能を追加

[2011-2-17] v1.8.6+01-9
・枠内敵襲表示不具合修正

[2011-2-15] v1.8.6+01-8+
・戦況マップに対象マップ選択を追加
・サイドメニューの不具合修正

[2011-2-15] v1.8.6+01-7
・合戦中に戦況マップを表示する機能を追加

[2011-2-11] v1.8.6+01-6
・着弾後リロード補正
・セッションタイムアウト補正
・空地戦力非表示設定


[2011-2-9] v1.8.6+01-5
・バグ修正

[2011-2-8] v1.8.6+01-4
・敵襲表示を綺麗に表示する機能を追加
・待機武将一覧をシンプルに表示する機能を追加

[2011-2-7] v1.8.6+01-3
・サイドメニューからカードを非表示にする機能を追加
・内政の復活ボタンを非表示にする機能を追加
・合戦中の【合戦に参加せよ】ボタンを通常の【合戦】ボタンに変更

[2011-2-6] v1.8.6+01-1
・合戦中の地図にデッキ部隊の行動状況を表示する機能を追加
（攻撃、合流、加勢、帰還を着弾時刻カウントダウン表示）



//主に秘境を楽に回すために開発。

☆★☆★ 注意事項 ☆★☆★
・やばい動きは入れていませんが、不安な人は使わない。
・特に察知される恐れはないと思いますが、これが原因で戦国IXAをBAN
　されたとしても責任はとれません。自己責任でお使いください。
・全鯖総合スレ以外の箇所で配布されたものは知りません。
・いわゆるチート的な事を期待されている人は残念でした。
　「便利」以上の機能はありません。

☆★☆★ 回復時間について ☆★☆★
・HP回復と討伐ゲージは「カードを表示した時に回復が始まったとしたら」
　の目安です。
・HP回復時間は自分が持っているだけのカードの95=>96を5秒ごとに
　リロードして計測したものから推測して全部を埋めました。
　おかしな増加をしている部分もありますが、目安だと思って利用を。

- 更新履歴
[2010-1-28] v1.8.6+
･チャットをデフォルトで100件に
取引をレアリティ順に
いろいろ不具合修正

[2010-01-??] v1.8.5+
･上のメニューバーに項目追加
上位兵種に対応その他


[2010-12-30] v1.8.5
･上のメニューバーに項目追加
新規アイコンのデフォルト登録（標準に戻すでOK・追加で増やしていくとデフォで17まで新規兵種など登録済）
本鯖有志情報によるの回復、市、兵舎などの訂正。

[2010-11-09] v1.8.3
・[部隊] ページ移動時の拠点選択の維持が機能しない＆意味がない＆むしろ困る状態だったので削除

[2010-11-09] v1.8.2
・グループの設定を好きにできるようにした。「設定」＞「グループ」
　1つ目の入力欄が画像です。30x30サイズ。gif以外テストしていません。
　普通に画像のURLを指定することもできます。
　http://cache.sengokuixa.jp/world/20101102-01/img/card/icon/icon_jo.png
　↑「序」の画像
　RFC2397のURIで指定することもできます。
　http://software.hixie.ch/utilities/cgi/data/data
　↑ここなどで画像をdata:形式に変換。
　2つ目の入力欄は行の色です。

[2010-11-08] v1.8.1
・[チャット] チャット履歴で同盟掲示板へのリンクを復活

[2010-11-07] v1.8.0
・[チャット] 見切れ対策
・[チャット] 「チャット履歴」のリンク先がチャット履歴ズバリでは無いので修正。
・[簡易編成] 武将をグループ分けできるようにした(100枚表示時)。
　　　　　　　アイコンを押すとグループが切り替わります。
　⇒ 後から指定した武将が上に来るので、同じ武将を固めたい場合は、
　方法１
　　・「設定」でグループ設定をクリアする。
　　・全ての武将を部隊から外す。
　　・簡易編成で100枚表示に。
　　・カードNo順に並べ直す(降順お勧め)。
　　・上から順にグループを設定する。

　方法２
　　・「設定」で「強制グループ単位ソート」のチェックを外す。
　　・全ての武将を部隊から外す。
　　・簡易編成で100枚表示に。
　　・カードNo順に並べ直す。
　　・「グループを表示順に覚えなおす」のボタンを押す。
　　・「設定」で「強制グループ単位ソート」にチェックを入れる。

　　※ グループ設定は「設定」からいつでもクリアできます。

・[簡易編成] グループ分け利用時に常にグループ並びにできるようにした。そうでない時は「GRP」ボタンを押すとグループ並びに。

[2010-11-05] v1.7.2
・不具合修正

[2010-10-30] v1.7.1
・[地図] 拠点に括弧が使われていると地図の機能が使えない問題を修正
・[部隊] ページ送りで選択中の部隊が保存されていなかった問題を修正

[2010-10-30] v1.7.0
・セッション切れを3時間と見て、ワールド選択を表示した時間からの
  カウントダウンを表示。30分以下になると表示。
  実際にやってみると3時間10分かも？まあ目安という事で。
・デフォルトの上位兵訓練数を指定できるように
・上位兵を上段に表示

[2010-10-30] v1.6.0
・[地図] 右クリックでクリックした場所を中心に表示
・[部隊] ページ送りでページ遷移しないようにした
・[地図] ★１〜表示でマウスオーバー時に場所を示すようにした

[2010-10-28] v1.5.2
・アップデートに対応

[2010-10-27] v1.5.1
・[全体] 倍速で休戦時間が減ることに対応。

[2010-10-25] v1.5.0
・[全体] 合戦向けに右サイドメニューの並びを変更

[2010-10-25] v1.4.0
・[チャット] 座標っぽいもの(具体的には数字,数字)を地図へのリンクに。

[2010-10-24] v1.3.1
・[全体] あらゆる入力欄で全角数字を半角に変換する機能
  ⇒ 「− or ー」も数字の前にある場合に限って変換するようにした

[2010-10-24] v1.3.0
・[全体] あらゆる入力欄で全角数字を半角に変換する機能
・[地図] ★いくつまでを表示するか設定で選べるようにした
・[施設] 市で残り資源を最大に生かして生産できる兵数の数と資源取引数を表示
・[施設] 各兵生産施設で、100以上生産できる場合のみ逓減された資源数で計算した値を表示

[2010-10-20] v1.2.0
・[全体] 敵襲をわかりやすくした。
・[部隊]でHPが100になるまでの時間を表示(注意 あくまで目安です)
・[設定] 記録したポイントの全クリアボタンを導入
・Chrome不具合対応

[2010-10-17] v1.1.0
・設定追加
・[部隊]でページ移動しても拠点を覚えるようにした

[2010-10-16] 
・Chrome対応


- 導入方法
[Firefox3]
・Firefox3の最新を立ち上げる
・Greasemonkey入れる
  https://addons.mozilla.org/ja/firefox/addon/748/
・同梱のjsをFirefoxにドロップ

[Chrome]
・もし古いバージョンを入れていたら chrome://extensions/ からアンインストール
・最新のChromeにjsをドロップ

- お願い
・改変は自由です。できるだけ還元してください。
・使う使わないは人それぞれいろいろな考えがあります。批判する人は
　それだけ戦国IXAが好きなのです。なので争わず大人のスルーで。


- 機能一覧

■ 全ページ
・合戦向けに右サイドメニューの並びを変更
・あらゆる入力欄で全角数字を半角に変換する機能
・全部隊へのリンク設置
・簡易編成(カード100)へのリンク設置
・敵襲があると最上段に強調表示。チャットが見たい場合はクリックで消せます。
・[チャット] 座標っぽいものを地図へのリンクに
・[チャット] 「チャット履歴」のリンク先修正
・[チャット] 見切れ対策

■ 内政
・レベル10未満の施設の数を表示
・建築中の数を表示

■ 施設
・市で残り資源を最大に生かして生産できる兵数の数と資源取引数を表示。
・各兵生産施設で、100以上生産できる場合のみ逓減された資源数で計算した値を表示

■ 部隊
・ページ送りでページ遷移しないようにした
・討伐ゲージが300/400/500になるまでのおおよその時間表示
・部隊に追加できる最初のカードの「選択中の部隊へ」を上段に
・ページ移動しても拠点がデフォにならないようにした
・HPが100になるまでのおおよその時間表示

■ 地図
・右クリックでクリックした場所を中心に表示
・指定★の座標表示
・プロフィールで登録した城等へのリンク表示

■ 秘境
・デフォで樹海を選択
・デフォで一番上の部隊選択
・選択できる部隊がある場合はボタンを上段へ

■ プロフィール
・合戦報告書へのリンクを設置
・城の座標を登録できるボタン(地図に出てくる。消せないので注意)

■ 簡易編成
・兵がMAXだと兵士数の入力欄に色が付く
・「表示している範囲での」総兵士数の表示
　(カード表示を15枚にしていると15枚分の総計が表示)
・武将のHPを表示
・HPが100でない武将の行に色が付く
・グループ対応

====================================
[おまけ]5秒ごとにリロードするという方法で計測したHPが95=>96になった時間

Lv0: 15
Lv1: 25
Lv2: 30
Lv5: 50
Lv6: 60
Lv7: 70
Lv10: 110
Lv11: 125
Lv15: 200
Lv16: 220
Lv17: 235
Lv20: 290
r1lv0: 320
r1lv3: 320
r1lv4: 330
r1lv5: 335
r1lv20: 575   
r2lv20: 860
